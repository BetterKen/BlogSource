---
title: Linux统计访问次数最多的十个ip
date: 2020-04-09 20:01:00
tags:
    - Linux命令
categories:
    - 基础
    - Linux命令
---

```shell
[root@rp-hb2-prod-01 wwwlogs]# head -n10000 access_nginx.log|awk '{print $1}'|sort|uniq -c|sort -k 1 -n -r |head -10
    108 100.121.197.123
    107 100.121.197.64
    106 100.121.197.99
    106 100.121.197.81
    106 100.121.197.114
    105 100.121.136.218
    104 100.121.136.205
    101 100.121.197.121
    101 100.121.197.110
    101 100.121.136.220
```



- **sort就是对内容进行排序，默认是自然顺序排序。**

- **uniq指令用于排重，而是只适用于相邻两行相同的情况。所以一般结合sort使用。即先sort排序再排重。**

- **uniq -u是只显示唯一的记录行。uniq -c是显示有重复记录的情况。**

- **sort -k 1 -n -r这个指令，参看下面sort指令参数的详细说明**

  ```shell
  -f  ：忽略大小写的差异，例如 A 与 a 视为编码相同；
  -b  ：忽略最前面的空格符部分；
  -M  ：以月份的名字来排序，例如 JAN, DEC 等等的排序方法；
  -n  ：使用『纯数字』进行排序(默认是以文字型态来排序的)；
  -r  ：反向排序；
  -u  ：就是 uniq ，相同的数据中，仅出现一行代表；
  -t  ：分隔符，默认是用 [tab] 键来分隔；
  -k  ：以哪个区间 (field) 来进行排序的意思
  所以 sort -k 1 -n -r 指令的意思就是对第一列按照纯数字逆序排序。
  ```

  

